
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/Master.cshtml";
}
	<section class="factor">
		<div class="container">
			<div class="factor__wrapper">
				<div class="factor__title">
					<h3>سبد خرید</h3>
					<h5 style="color:red;margin-left:10px;">

						@Html.ValidationSummary(true, "", new { @class = "text-danger" })

					</h5>
				</div>
				@if (ViewBag.Order_Details != null)
				{
					foreach (var f in ViewBag.Order_Details)
					{
						<div class="factor__list">
							<div class="row" data-space="0">

								<div class="col-lg-12">
									<div class="factor__item">
										<div class="factor__item__image" style="height:100px;width:150px;margin-top:20px;">

											<a href="/Factor/Delete/@f.Id" title=""><img style="border-radius: 8px;" src="@f.Product.Thumbnail" alt="" title=""></a>
										</div>
										<div class="factor__item__content">
											<div class="factor__item__content__title">

												<h2><a href="#" title="">@f.Product.Name</a></h2>
											</div>
											<div class="factor__item__content__detail">
												<div class="factor__item__content__detail__options">
													<form action="/Factor/ChangeColor" method="post" style="width:50%;float:right">
														<input type="hidden" value="@f.Id" name="Id" />
														<select name="Color" onchange="this.parentNode.submit();" class="factor__item__content__detail">
															<option value="NO">رنگ</option>
															@foreach (var c in f.Product.Color.Split(','))
															{
																<option value="@c" @if (f.Color == c) { @String.Format("selected") }> @c</option>
															}
														</select>
													</form>
												</div>

												<div class="factor__item__content__detail__price">

													<span style="margin-right:40px;">قیمت واحد :@string.Format("{0:0,0}", f.Product.Price - f.Product.Discount)<small>تومان</small></span>

													<span style="margin-right:40px;">قیمت کل  : @string.Format("{0:0,0}", (f.Product.Price - f.Product.Discount) * f.Qty)<small>تومان</small></span>
												</div>
											</div>
										</div>
										@*<div class="cart__item__quantity">
			<form id="ChangeQty" action="/Factor/ChangeQty" method="post" style="width:50%;float:right">
				<i id="plusclick" class="at-plus" data-type="plus"  onclick="$('#ChangeQty').submit()"></i>

				<span    data-value="@f.Qty"  data-max="10" data-min="1">@f.Qty</span>

				<i class="at-minus" data-type="minus" ></i>
				<input type="hidden" id="Qty" name="Qty" value="@f.Qty">
				<input type="hidden" value="@f.Id" name="Id" />
			</form>
		</div>*@
										<div class="factor__item__content__detail__options">
											<form action="/Factor/ChangeQty" method="post" style="width:50%;float:right">
												<input type="hidden" value="@f.Id" name="Id" />
												<label>تعداد</label>
												<select class="form-control" name="Qty" onchange="this.parentNode.submit();" style="width:60px">
													<option value="1" @if (f.Qty == 1) { @String.Format("selected") }>1</option>
													<option value="2" @if (f.Qty == 2) { @String.Format("selected") }>2</option>
													<option value="3" @if (f.Qty == 3) { @String.Format("selected") }>3</option>
													<option value="4" @if (f.Qty == 4) { @String.Format("selected") }>4</option>
													<option value="5" @if (f.Qty == 5) { @String.Format("selected") }>5</option>
													<option value="6" @if (f.Qty == 6) { @String.Format("selected") }>6</option>
													<option value="7" @if (f.Qty == 7) { @String.Format("selected") }>7</option>
													<option value="8" @if (f.Qty == 8) { @String.Format("selected") }>8</option>
													<option value="9" @if (f.Qty == 9) { @String.Format("selected") }>9</option>
													<option value="10" @if (f.Qty == 10) { @String.Format("selected") }>10</option>

												</select>
											</form>
										</div>
									</div>
								</div>
							</div>
						</div>
					}
			<div class="factor__last-price">
				<!-- factor last price -->
				<span>قیمت کل</span>
				<span>@string.Format("{0:0,0}", ViewBag.Order.ComputeTotalPrice())<small>تومان</small></span>
	
			</div>
					<div class="factor__last-price" style="margin-top:5px;">
						<a href="/Factor/Shipping"  style="color:white">
							ثبت سفارش و پیش فاکتور


						</a>
					</div>

				}
			</div>
		</div>
	</section>
	<script>

		function getdata(s) {
			alert(s);
			//alert($("#some''").data('value'));

		}
	
			//var cat = $("#ChangeQty").children("span").if("id");
			//alert(cat);
			//Id.value = 
			//	$("div").attr('id')
			//Qty.value = parseInt($("#qty").data('value')) + 1;
			//alert($("#x";+Id+"").data('value'));
		//$("#ChangeQty").append("<input name='Id' type='hidden' value=" + Id + " />");
		//$("<input name='Id' type='hidden'  />")	
		//	.attr("value", Id)
		//	.prependTo("#ChangeQty"); 

		//$("<input type='hidden' id='Qty' name='Qty' />")
		//	.attr("value", 3)
		//	.prependTo("#ChangeQty"); 

		//ChangeQty.submit();
	
	function changeqtyMinus() {
		Qty.value = parseInt($("#qty").data('value')) - 1;
		ChangeQty.submit();
		}
	</script>