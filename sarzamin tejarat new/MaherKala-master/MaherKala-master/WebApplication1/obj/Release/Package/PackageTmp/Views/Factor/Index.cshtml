
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/Master.cshtml";
}
	<section class="factor">
		<div class="container">
			<div class="factor__wrapper">
				<div class="factor__title">
					<h3>سبد خرید</h3>
					<h5 style="color:red">
						@TempData["ShippingMessage"]
					</h5>
				</div>
				@if (ViewBag.Order_Details != null)
				{
					foreach (var f in ViewBag.Order_Details)
					{
						<div class="factor__list">
							<div class="row" data-space="0">

								<div class="col-lg-12">
									<div class="factor__item">
										<div class="factor__item__image" style="height:100px;width:150px;margin-top:20px;">

											<a href="/Factor/Delete/@f.Id" title=""><img style="border-radius: 8px;" src="@f.Product.Thumbnail" alt="" title=""></a>
										</div>
										<div class="factor__item__content">
											<div class="factor__item__content__title">

												<h2><a href="#" title="">@f.Product.Name</a></h2>
											</div>
											<div class="factor__item__content__detail">
												<div class="factor__item__content__detail__options">

													<select name="Color" onchange="this.parentNode.submit();" class="form-control">
														<option value="NO">رنگ</option>
														@foreach (var c in f.Product.Color.Split(','))
														{
															<option value="@c" @if (f.Color == c) { @String.Format("selected") }> @c</option>
														}
													</select>
												</div>

												<div class="factor__item__content__detail__price">

													<span style="margin-right:40px;">قیمت واحد :@string.Format("{0:0,0}", f.Product.Price - f.Product.Discount)<small>تومان</small></span>

													<span style="margin-right:40px;">قیمت کل  : @string.Format("{0:0,0}", (f.Product.Price - f.Product.Discount) * f.Qty)<small>تومان</small></span>
												</div>
												<div class="factor__item__content__detail__price">



													<span style="margin-right:20px;">قیمت کل  : @string.Format("{0:0,0}", (f.Product.Price - f.Product.Discount) * f.Qty)<small>تومان</small></span>
												</div>
											</div>

										</div>

										<div class="cart__item__quantity">
											<form action="/Factor/ChangeQty" method="post" style="width:50%;float:right">
												<i class="at-plus" data-type="plus" onclick="changeqty()" @*onclick="this.parentNode.submit()"*@></i>
												<span id="qty" data-value="1" data-max="10" data-min="1">1</span>
												<i class="at-minus" data-type="minus" onclick="this.parentNode.submit()"></i>
												<!-- get quantity -->
												<input type="hidden" name="name="Qty"" value="">

											</form>
												<!-- insert default value and max, min -->		
										</div>
									</div>
								</div>				
							</div>						
						</div>
					}
					<div class="factor__last-price">
						<!-- factor last price -->
						<span>قیمت کل</span>
						<span>@string.Format("{0:0,0}", ViewBag.Order.ComputeTotalPrice())<small>تومان</small></span>
					</div>
				}
			</div>
		</div>
	</section>
<script>
	function changeqty() {
		alert($("#qty").data('value'));
	}




</script>